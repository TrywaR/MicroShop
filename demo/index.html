<!DOCTYPE html>
<html lang="ru" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>MicroShop</title>

    <!-- jquery -->
    <script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script>

    <!-- bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>
    <!-- <script src="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha2/js/bootstrap.min.js" charset="utf-8"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha2/css/bootstrap.min.css"> -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js" integrity="sha384-q2kxQ16AaE6UbzuKqyBE9/u/KzioAlnx2maXQHiDX9d4/zp8Ok3f+M7DPm+Ib6IU" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.min.js" integrity="sha384-pQQkAEnwaBkjpqZ8RU1fF1AKtTcHJwFl3pblpTlHXybJjHpMYo79HY3hIi4NKxyj" crossorigin="anonymous"></script>

    <!-- font-awesome -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/js/all.min.js" charset="utf-8"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css">

    <!-- jgrowl -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-jgrowl/1.4.7/jquery.jgrowl.min.js" charset="utf-8"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-jgrowl/1.4.7/jquery.jgrowl.min.css">

    <!-- code-prettify  -->
    <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>

    <!-- main -->
    <script src="main.js" charset="utf-8"></script>
    <link rel="stylesheet" href="main.css">
  </head>
  <body>
    <header>
      <div class="container mt-2">
        <div class="row">
          <div class="col-12">
            <h1>MicroShop</h1>
          </div>
        </div>
      </div>

      <div class="container mt-2">
        <div class="row">
          <div class="col-12">
            <h2>Docs</h2>
          </div>
          <div class="col-12">
            <a class="btn btn-primary btn-lg" href="https://github.com/TrywaR/MicroShop" target="_blank">
              <i class="fab fa-github"></i>
            </a>
          </div>
          <div class="col-12">
            <h2>Подключение</h2>
            <pre class="prettyprint">
&lt;script src="main.js" charset="utf-8"&gt;&lt;/script&gt;
&lt;link rel="stylesheet" href="main.css"&gt;</pre>
          </div>
          <div class="col-12">
            <h2>HTML</h2>
            <h3>Карточка товара</h3>
<pre class="prettyprint">&lt;div class="card"&gt;
  &lt;input type="hidden" name="art" value="2"&gt;
  &lt;input type="hidden" name="id" value="2"&gt;
  &lt;input type="hidden" name="count" value="1"&gt;
  &lt;input type="hidden" name="size" value="1"&gt;
  &lt;input type="hidden" name="url" value="#"&gt;
  &lt;input type="hidden" name="name" value="Продукт 2"&gt;
  &lt;img src="product.png" class="card-img-top" alt="..."&gt;
  &lt;div class="card-body"&gt;
    &lt;h5 class="card-title"&gt;Продукт 2&lt;/h5&gt;
    &lt;div class="price"&gt;
      1200
    &lt;/div&gt;
    &lt;p class="card-text"&gt;Описание продукта&lt;/p&gt;
    &lt;a href="#" class="btn btn-primary"&gt;Подробнее&lt;/a&gt;
    &lt;button type="submit" class="btn btn-success" value="cart/add"&gt;
      &lt;i class="fas fa-cart-plus"&gt;&lt;/i&gt;
      В корзину
    &lt;/button&gt;
    &lt;div class="text-right cart_add_status"&gt;
      &lt;a href="/cart.html"&gt;В корзине&lt;/a&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;</pre>
          </div>

          <div class="col-12">
            <h3>Иконка корзины</h3>
            <p>С количеством товаров и ссылкой на корзину</p>
<pre class="prettyprint">&lt;div class="shop_cart"&gt;
  &lt;a href="[[~ID_PAGE_CART]]" class="shop_cart_btn"&gt;
    &lt;i class="fas fa-shopping-cart"&gt;&lt;/i&gt;
    &lt;span&gt;&lt;/span&gt;
  &lt;/a&gt;
&lt;/div&gt;</pre>
<p>* где <strong>[[~ID_PAGE_CART]]</strong> ссылка на страницу с корзиной</p>
          </div>

          <div class="col-12">
            <h3>Корзина с оформлением заказа</h3>
<pre class="prettyprint">&lt;!-- Страница оформление заказа --&gt;
&lt;div class="form_order_null col-12"&gt;
  &lt;p class="text-center"&gt;
    В корзине нет товаров
  &lt;/p&gt;
&lt;/div&gt;

&lt;div class="form_order_success col-12"&gt;
  &lt;h3 class="text-center"&gt;
    Заказ успешно оформлен!
  &lt;/h3&gt;
&lt;/div&gt;

&lt;form id="form_order" class="form_order col-12"&gt;
  &lt;!-- Товары --&gt;
  &lt;div class="_block form_order_cart" id="msCart"&gt;
    &lt;div class="_title"&gt;
      &lt;h3&gt;Корзина&lt;/h3&gt;
    &lt;/div&gt;
    &lt;div class="table-responsive"&gt;
      &lt;table class="table table-striped"&gt;
        &lt;thead&gt;
          &lt;tr class="header"&gt;
            &lt;th class="number text-center"&gt;№&lt;/th&gt;
            &lt;th class="title"&gt;Наименование&lt;/th&gt;
            &lt;th class="art text-center"&gt;Артикул&lt;/th&gt;
            &lt;th class="price text-center"&gt;Цена&lt;/th&gt;
            &lt;th class="count text-center"&gt;Количество&lt;/th&gt;
            &lt;th class="remove"&gt;&lt;/th&gt;
          &lt;/tr&gt;
        &lt;/thead&gt;
      &lt;/table&gt;
    &lt;/div&gt;

    &lt;input type="hidden" id="input_products" name="products" value=""&gt;
  &lt;/div&gt;

  &lt;!-- Инфа --&gt;
  &lt;div class="row _block"&gt;
    &lt;div class="col-12 _title"&gt;
      &lt;h3&gt;Оформление закза&lt;/h3&gt;
    &lt;/div&gt;

    &lt;div class="col-12"&gt;
      &lt;div class="form-group row"&gt;
        &lt;label for="input_fio" class="col-sm-3 col-form-label"&gt;ФИО&lt;/label&gt;
        &lt;div class="col-sm-9"&gt;
          &lt;input type="text" name="fio" class="form-control" id="input_fio" aria-describedby="emailHelp" placeholder="ФИО"&gt;
        &lt;/div&gt;
      &lt;/div&gt;
      &lt;div class="form-group row"&gt;
        &lt;label for="input_tel" class="col-sm-3 col-form-label"&gt;Телефон&lt;/label&gt;
        &lt;div class="col-sm-9"&gt;
          &lt;input type="text" name="tel" class="form-control" id="input_tel" placeholder="Телефон" required="required"&gt;
        &lt;/div&gt;
      &lt;/div&gt;
      &lt;div class="form-group row"&gt;
        &lt;label for="input_email" class="col-sm-3 col-form-label"&gt;Email&lt;/label&gt;
        &lt;div class="col-sm-9"&gt;
          &lt;input type="text" name="email" class="form-control" id="input_email" placeholder="Email"&gt;
        &lt;/div&gt;
      &lt;/div&gt;
      &lt;div class="form-group row"&gt;
        &lt;label for="input_comment" class="col-sm-3 col-form-label"&gt;Комментарий&lt;/label&gt;
        &lt;div class="col-sm-9"&gt;
          &lt;textarea name="comment" rows="3" class="form-control" id="input_comment" placeholder="Комментарий"&gt;&lt;/textarea&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;

  &lt;!-- Оформление --&gt;
  &lt;div class="row _block"&gt;
    &lt;div class="col-12 mb-2"&gt;
      &lt;div class="form-gorup text-right"&gt;
        &lt;button type="submit" class="btn"&gt;Оформить&lt;/button&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/form&gt;
&lt;!-- Страница оформление заказа x--&gt;</pre>
          </div>
        </div>
      </div>

      <div class="container mt-2">
        <div class="row">
          <div class="col-12">
            <h2>Server</h2>
          </div>
          <div class="col-12">
            <ul class="nav nav-tabs" id="myTab" role="tablist">
              <li class="nav-item" role="presentation">
                <a class="nav-link active" id="php-tab" data-bs-toggle="tab" href="#php" role="tab" aria-controls="php" aria-selected="true">PHP</a>
              </li>
              <li class="nav-item" role="presentation">
                <a class="nav-link" id="modx-tab" data-bs-toggle="tab" href="#modx" role="tab" aria-controls="profile" aria-selected="false">MODX</a>
              </li>
            </ul>
            <div class="tab-content" id="myTabContent">
              <div class="tab-pane fade show active" id="php" role="tabpanel" aria-labelledby="php-tab">
<pre class="prettyprint">&lt;php
$iUserId = 1; // id Пользователя
switch ($_REQUEST['MicroShop']) {
  case 'show':  // Вывод корзины из базы
    if ( $iUserId ) {
      // Получаем корзину
      $result = $modx->query("SELECT * FROM `modx_microshop` WHERE `user` = " . $iUserId);
      if ( is_object($result) ) echo json_encode( $result->fetch(PDO::FETCH_ASSOC) );
    }
    die(); break;

  case 'update':  // Оновление товаров
    // Получаем продукты
    // print_r($_POST);
    $arrProducts = json_encode($_REQUEST['products']);
    // Обновляем продукты
    // print_r($arrProducts);
    foreach ($arrProducts as &$arrProduct) $arrProduct = MicroShop_product_update($arrProduct);
    // Возвращяем продукты
    print_r($arrProducts);
    die(); break;

  case 'save': // Сохраняем коризну в базу
    if ( $iUserId ) {
      // Получаем продукты
      $arrProducts = json_encode($_REQUEST['products']);
      // Сохраняем продукты
      $modx->query("INSERT INTO `modx_microshop` (`products`,`user`,`last_update`) VALUES('". $arrProducts . "','" . $iUserId . "', '" . date('Y-m-d H:i:s') . "')");
    }
    die(); break;
}</pre>
              </div>
              <div class="tab-pane fade" id="modx" role="tabpanel" aria-labelledby="modx-tab">MODX</div>
            </div>
          </div>
        </div>
      </div>

    </header>
    <main>
      <div class="container mt-5 mb-5">
        <div class="row mt-2 mb-2">
          <div class="col-6">
            <h2>Demo</h2>
          </div>
          <div class="col-6 ">
            <div class="shop_cart text-end">
              <a href="/cart.html" class="shop_cart_btn btn btn-primary btn-lg">
                <i class="fas fa-shopping-cart"></i>
                <span></span>
              </a>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col microshop_product">
            <div class="card">
              <input type="hidden" name="art" value="1">
              <input type="hidden" name="id" value="1">
              <input type="hidden" name="counts" value="1">
              <input type="hidden" name="size" value="1">
              <input type="hidden" name="url" value="#">
              <input type="hidden" name="name" value="Продукт">
              <img src="product.png" class="card-img-top" alt="...">
              <div class="card-body">
                <h5 class="card-title">Продукт</h5>
                <div class="price">
                  1200
                </div>

                <div class="card-text">Описание продукта</div>

                <a href="#" class="btn btn-primary">Подробнее</a>
                <div class="d-flex mt-2">
                  <div class="w-50 d-flex">
                    <button type="button" class="product_count_minus btn" name="button">-</button>
                    <input type="text" name="count" id="product_count" min="1" class="form-control product_count_value w-50 text-center" value="1" />
                    <button type="button" class="product_count_plus btn" name="button">+</button>
                  </div>
                  <div class="w-50 text-end">
                    <button type="submit" class="btn btn-success" value="cart/add">
                      <i class="fas fa-cart-plus"></i>
                      В корзину
                    </button>
                  </div>
                </div>

                <div class="text-end cart_add_status">
                  <a href="/cart.html">В корзине</a>
                </div>
              </div>
            </div>
          </div>
          <div class="col microshop_product">
            <div class="card">
              <input type="hidden" name="art" value="2">
              <input type="hidden" name="id" value="2">
              <input type="hidden" name="count" value="1">
              <input type="hidden" name="size" value="1">
              <input type="hidden" name="url" value="#">
              <input type="hidden" name="name" value="Продукт 2">
              <img src="product.png" class="card-img-top" alt="...">
              <div class="card-body">
                <h5 class="card-title">Продукт 2</h5>
                <div class="price">
                  1200
                </div>
                <p class="card-text">Описание продукта</p>
                <div class="d-flex justify-content-between">
                  <a href="#" class="btn btn-primary">Подробнее</a>
                  <button type="submit" class="btn btn-success" value="cart/add">
                    <i class="fas fa-cart-plus"></i>
                    В корзину
                  </button>
                </div>
                <div class="text-end cart_add_status">
                  <a href="/cart.html">В корзине</a>
                </div>
              </div>
            </div>
          </div>
          <div class="col microshop_product">
            <div class="card">
              <input type="hidden" name="art" value="3">
              <input type="hidden" name="id" value="3">
              <input type="hidden" name="count" value="1">
              <input type="hidden" name="size" value="1">
              <input type="hidden" name="url" value="#">
              <input type="hidden" name="name" value="Продукт 3">
              <img src="product.png" class="card-img-top" alt="...">
              <div class="card-body">
                <h5 class="card-title">Продукт 3</h5>
                <div class="price">
                  1200
                </div>
                <p class="card-text">Описание продукта</p>
                <div class="d-flex justify-content-between">
                  <a href="#" class="btn btn-primary">Подробнее</a>
                  <button type="submit" class="btn btn-success" value="cart/add">
                    <i class="fas fa-cart-plus"></i>
                    В корзину
                  </button>
                </div>
                <div class="text-end cart_add_status">
                  <a href="/cart.html">В корзине</a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
    <footer>
    </footer>
  </body>
</html>
